https://docs.openathens.net/libraries/Attribute-release.10486984.html

# 属性リリース

:bulb: パス: Preferences > Attribute release

:warning: この機能により、ユーザーに関する選択された情報を第三者に公開することができます。お客様は、この種のデータの公開に関連するすべてのローカルのルール、および法令を確実に遵守する責任を負います。


スキーマ・エディターはリリース可能な属性を追加定義できるところで、サービスプロバイダにどの属性をリリースするかを決定するのは、属性リリースセクションです。

この設定ページでは、ドメイン管理者が2種類のリリースポリシーを設定することができます：

### グローバル

リストの一番上にあるグローバルポリシーは、どの属性が常にどのサービスプロバイダに解放されるかを指定します。ほとんどのフェデレーションのリソースのニーズは、これだけで充分に満たされる場合が多いです。このポリシーからデフォルトの属性を削除するべきではありません。

### リソース別ポリシー
ページの上部にある add ボタンをクリックすると、リソースを選択し、そのリソースに追加の属性を解放するポリシーを設定することができます。

リソースを追加するには、「add」ボタンをクリックし、リソースの名前の入力を開始します - システムは短い選択リストを表示しますが、タイプを続けるとリストはもっと短くなります。リソースを選択すると、グローバルポリシーの下のリストに編集モードが表示されます; アルファベット順なので、スクロールが必要な場合があります。

リソースポリシーでリリースされる属性は、グローバルポリシーで解放される属性に追加されるものであり、グローバルポリシーで解放される属性を制限することはできません。
![globalpolicy](https://docs.openathens.net/libraries/10486984/Release.Add.Resource.png?inst-v=f79effe0-b2fa-4160-b4b6-3b5d44ab3470)

## ポリシーの編集方法 
ポリシーにマウスオーバーすると、右側に編集と削除のボタンが表示されます。

![policy](https://docs.openathens.net/libraries/10486984/Release.Edit.Button.png?inst-v=f79effe0-b2fa-4160-b4b6-3b5d44ab3470)

edit をクリックすると、すべてのリリース可能な属性のリストが表示されます。緑色でハイライトされ、チェックマークが表示されている属性は、（グローバルポリシーに加えて）そのリソースにリリースされ、十字が付いた灰色のものはリリースされません。
![attributes](https://docs.openathens.net/libraries/10486984/Release.Edit.Attributes.png?inst-v=f79effe0-b2fa-4160-b4b6-3b5d44ab3470)

unreleased と released を変更するには、その属性をクリックします。

属性は、ここに表示名を表示します。ターゲット名を確認するには、属性の上にカーソルを置きます - このターゲット名は、urn:oid:1.3.6.1.4.1.5923.1.1.1のように、属性を解放するサービス プロバイダで使用される名前になります。

done または cancel をクリックして、そのポリシーのエディターを終了し、変更内容を保持または破棄します。ページの上部にあるsave changes ボタンをクリックすると、更新されたポリシーが新しい OpenAthens セッションで直ちに有効になります (つまり、これをテストする場合は、リソースまたはデバッグモードで効果を確認するために、サインアウトして再度ログインする必要があります)。

#### 高度な設定

編集モードで表示されるadvencedボタンでは、属性の別名を追加することができます。例えば、メールアドレスをリソースに公開する際に、「emailAddress」ではなく「Email」のような特定の名前を期待される場合などです。


設定方法：

1. リソースにまだポリシーがない場合は、リソースごとのポリシーを追加します。
1. Edit を選択し、リリースする属性にチェックを入れます。
1. advanced をクリックし、左のボックスのリストから属性を選択します。
1. 右側のボックスに必要なエイリアスを入力します。リソースによっては、大文字と小文字が区別される場合があります。
1. プラスボタンを使って、そのリソースに使用する他のエイリアスを追加し、done をクリックして保存します。
1. 同じ詳細ダイアログで、指定したリソースに特定のNameID属性とフォーマットを設定することもできます。これはフェデレーションのリソースに使用する必要はありませんが、一部のカスタムSAMLリソースではこの設定を変更する必要があります。例えば、G SuiteではemailAddressのNameID形式と、電子メールアドレスを含むNameID属性が必要です。

## 推奨事項 
リソースにパーミッションセットを割り当てる方法として、各リソースごとに、それぞれポリシーを設定したくなります。そうすると、アクセスに対する非常に厳しいコントロールを維持することができますが、通常はお勧めしません。なぜならば、そのような設定は複雑さを増し、その結果、エラーが発生しやすくなるからです。加えて、アクセスに問題があった場合のトラブルシューティングも難しくなるからです。

ほとんどの場合、推奨されるアプローチは、ほとんどのリソースを満足させるいくつかの主要な属性をリリースするようにグローバルポリシーを設定し、より多くを要求する（通常は）少数のリソースのためにのみ、リソースポリシーを追加することです。厳密な管理を行いたい場合は、制限モードを使用して、パーミッション・セットに指定されていないリソースへのアクセスを防止することができます

電子メールアドレスや本名などの個人属性は、公開する場合、一般に、グローバルポリシーではなく、リソースポリシーに含める必要があります。

## 何か注意することはありますか？
リソースごとのポリシーは、グローバル・ポリシーによってリリースされた属性のリリースをブロックすることはできません。

デフォルトでは、グローバル・ポリシーのすべての属性は、ユーザーがアクセスしようとするフェデレーション内のすべてのサービス・プロバイダーに解放されます。これは、必要に応じて制限モードによって抑制することができます。

ローカル接続属性をリリース可能なスキーマ属性にマッピングしている場合、そのデータもここで作成したポリシーによって解放されます（または解放されません）。

サービスプロバイダが古い SAML 1.x 標準しかサポートしていない場合、属性はそれほど安全に送信されないので、電子メールアドレスや実名などのデータを渡さないほうがよいでしょう。

department 属性と postalAddress 属性のいずれかを渡す場合で、 アカウントと組織の両方に値が設定されている場合は、 両方の値が送信されます。